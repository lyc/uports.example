From 5408ff5cfee8f72930dfdfad34b2a81758fcac52 Mon Sep 17 00:00:00 2001
From: Max Lee <yowching.lee@gmail.com>
Date: Mon, 6 Jan 2025 20:03:53 +0800
Subject: [PATCH] work-around for macOS eligible dylib behavior

---
 support/shobj-conf | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/support/shobj-conf b/support/shobj-conf
index cd7634d..dd3aab4 100644
--- a/support/shobj-conf
+++ b/support/shobj-conf
@@ -166,7 +166,7 @@ darwin*)
 			#SHOBJ_CFLAGS=${SHOBJ_CFLAGS}' -arch i386 -arch x86_64'
 			;;
 		 esac
-		 SHOBJ_LDFLAGS="-dynamiclib -dynamic -undefined dynamic_lookup ${SHOBJ_ARCHFLAGS}"
+		 SHOBJ_LDFLAGS="-dynamiclib -dynamic ${SHOBJ_ARCHFLAGS}"
 		 SHLIB_XLDFLAGS="-dynamiclib ${SHOBJ_ARCHFLAGS}"' -install_name $(libdir)/`echo $@ | sed "s:\\..*::"`.$(SHLIB_MAJOR).$(SHLIB_LIBSUFF) -current_version $(SHLIB_MAJOR)$(SHLIB_MINOR) -compatibility_version $(SHLIB_MAJOR)$(SHLIB_MINOR) -v'
 		;;
 	esac
-- 
2.47.1

